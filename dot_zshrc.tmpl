{{ if eq .chezmoi.os "darwin" }}
# darwin
path+=('/Users/jerry/.local/bin')
path+=('/Users/jerry/bin')
path+=('/opt/homebrew/Cellar/todoist/0.20.0/bin')

source ${HOME}/.ghcup/env

if type brew &>/dev/null; then
  FPATH=$(brew --prefix)/share/zsh-completions:$FPATH

  autoload -Uz compinit
  compinit
fi

# from https://github.com/Aloxaf/fzf-tab
# NOTE: fzf-tab needs to be loaded after compinit, but before plugins which will wrap widgets, such as zsh-autosuggestions or fast-syntax-highlighting!!
source /Users/jerry/Aloxaf/fzf-tab/fzf-tab.plugin.zsh

source /opt/homebrew/share/zsh-autosuggestions/zsh-autosuggestions.zsh
source /opt/homebrew/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
source $(brew --prefix)/share/zsh-vi-mode/zsh-vi-mode.plugin.zsh

# so that zsh-vi-mode does not overwrite fzf keybindings
zvm_after_init_commands+=('[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh')

# so that zsh-vi-mode does not overwrite vi-forward-word
zvm_after_lazy_keybindings ()
{
  bindkey '^w' vi-forward-word
}

{{ else if eq .chezmoi.os "linux" }}
# linux
path+=('/home/jerry/.local/bin')

{{ else }}
# other operating system
{{ end }}

setopt share_history
setopt hist_ignore_space

HISTSIZE=1000000
SAVEHIST=1000000

bindkey -v

export EDITOR="nvim"

export MANPAGER="sh -c 'col -bx | bat -l man -p'"

export FZF_DEFAULT_OPTS="--bind ctrl-a:select-all,ctrl-d:deselect-all,ctrl-t:toggle-all"

alias lg="lazygit"
alias ls="eza"

# so visidata works in tmux
alias vd="TERM=xterm-256color vd"

eval "$(zoxide init zsh)"

eval "$(rtx activate zsh)"

eval "$(starship init zsh)"

# for kitty tab titles
precmd () {print -Pn "\e]0;%1d\a"}
